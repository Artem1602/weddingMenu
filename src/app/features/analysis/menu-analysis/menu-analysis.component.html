<section class="menu-analysis" #analysisContent>
  <app-panel-card>
    <header appPanelCardHeader>
      <div class="menu-analysis__header">
        <h2>Аналіз меню</h2>
        @if (hasSelection()) {
          <div class="menu-analysis__summary">
            <span>Категорій: {{ totalGroups() }}</span>
            <span>Позицій разом: {{ totalQuantity() }}</span>
          </div>
        }
      </div>
      <div class="menu-analysis__actions">
        <button type="button" class="btn btn-outline-secondary btn-sm" [disabled]="!hasSelection()" (click)="onSaveAsJson()">
          Зберегти
        </button>
        <button type="button" class="btn btn-primary btn-sm" [disabled]="!hasSelection()" (click)="onSaveAsPdf()">
          Завантажити PDF
        </button>
      </div>
    </header>

    @if (hasSelection()) {
      <app-analysis-tables [groups]="groupedItems()" />
    } @else {
      <app-empty-state message="Виберіть стави для аналізу." />
    }
  </app-panel-card>
</section>
